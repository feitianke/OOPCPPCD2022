# Day 1 - 程序框架与遥感图像基本概念

## 内容提要
> 此处将简述程序框架的搭建过程和遥感图像的基本概念，通过对以下内容的阅读，需要掌握如下2点：
1. 根据课设的要求，能搭建遥感图像处理程序运行流程，程序能响应用户的菜单输入；
2. 深刻掌握遥感图像的基本概念和常用术语的含义。

## 1. 程序框架
> 课设要求在控制台输入例如：“O”、“I”、“H”、“X"等字符，执行相应的功能。此处所用到的关键点有：1）switch---case的判断分支；2）do---while循环，多次输入。

示例代码如下：
1. 用户输入字符，直到输入"x"或"X"退出程序。
```c++
#include <iostream>
using namespace std;

int main()
{
  char	cCmd;
  
  do
  {
 	cin >> cCmd;
  }while(cCmd!='x' && cCmd!='X');	//cCmd=='x'or'X'，则退出循环，此处判断条件为false，
  // 即!(cCmd=='x' || cCmd=='X') ==> (cCmd!='x' && cCmd!='X')
  
  return 0;
}
```

2. 增加 switch-case判断分支
> 在上一代码片中，增加switch-case
```c++
#include <iostream>
using namespace std;

int main()
{
  char	cCmd;
  
  do
  {
 	cin >> cCmd;
 	//新增switch-case判断分支
 	switch(cCmd)
 	{
 	// 此处重点关注switch-case的语法
      case 'O':
      case 'o':
      	cout << "Menu Open." << endl;
      	break;
      case 'C':
      case 'c':
      	cout << "Menu Close." << endl;
      	break;
      case '?':
      	cout << "Menu Help." << endl;
      	break;
      case 'X':
      case 'x':
      	cout << "Menu Exit." << endl;
      	break;
      default:
      	cout << "Menu None." << endl;
      	break;
 	}
 	// switch - case end
 	
  }while(cCmd!='x' && cCmd!='X');	//cCmd=='x'or'X'，则退出循环，此处判断条件为false，
  // 即!(cCmd=='x' || cCmd=='X') ==> (cCmd!='x' && cCmd!='X')
  
  return 0;
}
```

3. 增加菜单帮助说明
> 为了保证程序的友好，我们增加菜单提示的功能，当用户输入不合法时，程序弹出提示。我们通过定义一个函数来专门负责输出提示信息，代码如下：
>
```c++
//===================================================================
// 菜单提示，命令行
//===================================================================
void Usage()
{
	cout << "############ Remote Sensing Image Process Tools.############\n";
	cout << "# X – Exit Exit\t退出程序" << endl;
	cout << "# O – Open \t打开影像文件" << endl;
	cout << "# I – Information\t输出当前图像的路径 ，行列值 、波段数 、数据类 数据类 型、排列方式等信息" << endl;
	cout << "# C –Closed\t关闭当前图像" << endl;
	cout << "# S – Statistics\t输出图像数据统计量 ，若文件未打开 ，输出提示" << endl;
	cout << "# H – Histogram\t输出图像的直方" << endl;
	cout << "# ? – Help\t输出本信息" << endl;
	cout << "# A – Save as\t输入保存的文件路径 ，输出图像为二进制文件" << endl;
	cout << "# R – Rotate\t图像旋转，输入角度逆时针" << endl;
	cout << "# Z – Zoom\t图像缩放，输入比例尺出" << endl;
	cout << "# F - Filter\t输入滤波核，输出滤波后图像" << endl;
	cout << "#################################################################" << endl;
}
```

## 2. 遥感图像基本概念
- 图像数据

	我们对图像并不陌生，现如今，只要按下相机快门就能得到一幅数字图像，很快就能在手机上查看，分享。那么图像数据到底是什么呢？它是如何存放的呢？图像数据包括哪些内容呢？

	- 图像格式：常见的图像格式有：jpeg、tif、png、bmp等，这些都是常见的数字图像格式。那么遥感图像格式又是什么呢？
	
	- 遥感图像：遥感图像除了存储数字图像外，还要记录诸多辅助数据，比如：成像时刻，传感器参数、波长信息、地图投影、定标系数、空间定位参数等等。此时我们不必理会各辅助数据的具体含义，只需知晓遥感图像数据除了存储图像（照片）外，还需要存储诸多的辅助信息。因此遥感图像 = 数字图像 + 辅助信息。
	
	- 数字图像：不知你是否留意过，在手机上显示照片时，照片都是矩形区域，而不会出现其他诸如圆形、多边形等形状。事实上，一幅数字图像可以简单抽象为数学意义上的矩阵，即以行列整齐排列的元素。因此，在图像处理领域，数字图像的表示也是用矩阵表示的。我们知道相机拍摄的彩色照片一般都是红绿蓝三个通道组成，即彩色照片是有R,G,B3个矩阵组成。

	- 辅助数据：如上遥感图像所述，遥感图像的辅助数据是用于描述遥感图像的数据，这种描述数据的数据，我们称之为元数据。

	至此，你应该明白了遥感图像常常由2个文件组成，一个是图像文件，用于存储多个矩阵的元素，对应于.img或无后缀的文件；另一个文件是元数据文件，用于描述遥感图像的辅助信息，对应于测试数据的.hdr文件。

- 像素(Pixel)：对应于前述的矩阵某行某列的元素，矩阵元素是访问矩阵的最小单元，同理像素也是图像的最小单元，一幅遥感图像，由多个像素按行、列整齐排列而成。每个矩阵元素都有值，同理，每个像素对应的值成为像素值或者也成为DN (Digital Number)。

- 维度

	图像是由多个矩阵组合而成的，矩阵有行数、列数，图像也同样如此。
	
	- 行数(lines)：对应于图像的高度，常用字母$i$表示
	- 列数(samples)：对应于图像的宽度，常用字母$j$表示
	- 波段数(bands)：对应于图像的厚度，常用字母$k$表示

- 数据类型

	矩阵的每个元素，一定是有数据类型的，比如：char, int, float等。同理图像的像素值类型即为图像的数据类型。根据C++的语法，定义一个矩阵，要求矩阵每个元素的数据类型是相同的，这同样适用于图像。

- 存储方式
	
	图像数据是三维张量（多个二维矩阵组成），如前所述图像的三个维度（行、列、波段），尽管在计算机中表示三维数组的存储顺序是一定的，但是在存储图像数据的时候，就会有多种选择，既可以按波段优先存储，也可按行优先存储，还可按像素优先存储，存储方式的不同，自然会影响到数据IO的不同。但不论哪种存储方式，其图像数据本身是等价的。
	
	- BSQ：波段存储优先 (Band Sequential format)
	> 比如：DJI 无人机在航拍时，每次拍摄一张照片，此时按BSQ存储比较方便

	- BIL：行存储优先 (Band Interleave by Line)
	> 比如：高分辨率光学卫星常用线扫描方式，每次拍摄一条扫描线，随着传感器沿轨道飞行，即可得到一个条带的图像，此时按BIL方式存储比较方便。

	- BIP：像素存储优先 (Band Interleave by Pixel)
	> 比如：早期光学遥感传感器没法做的小巧，每次智能拍摄一个像素，只有通过旋转相机来获取一个跳到的图像，此时按BIP方式存储比较方便。

	> PS:上述举例，只是为了形象化的区分BSQ, BIL, BIP的区别，数据存储的方式与传感器成像模式无关。

	简而言之，不同的图像存储方式，就是像素值存储时的优先级不同而已。
	
---
[Home](./README.md) | [课设内容](./Subject.md)
